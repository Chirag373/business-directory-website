{% extends "base.html" %}
{% load static %}

{% block title %}Premium Businesses - Business Directory 2.0{% endblock %}

{% block extra_css %}
<style>
  /* Fixed navigation bar width - This matches the home page style */
  nav {
    width: 100% !important;
    max-width: 100% !important;
    position: sticky !important; /* Make nav sticky */
    top: 0 !important; /* Stick to the top */
    left: 0 !important;
    z-index: 9999 !important; /* Ensure very high z-index */
    background-color: #fff !important; /* Ensure solid background */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important; /* Enhanced shadow */
  }
  
  nav .nav-container {
    max-width: 80% !important;
    margin: 0 auto !important;
    width: 80% !important;
  }
  
  @media (max-width: 1440px) {
    nav .nav-container {
      max-width: 95% !important;
      width: 95% !important;
    }
  }

  /* Add body margin bottom */
  body {
    margin-bottom: 2rem !important; /* Fixed margin bottom for all pages */
  }

  /* Premium page specific styling - Enhanced Responsive Version */
  :root {
    --premium-gold: #f5a623;
    --premium-gold-dark: #e09000;
    --flash-duration: 2s;
    --bulb-glow-color: #f5a623;
    --container-width: 95%;
  }

  .premium-banner {
    background: linear-gradient(135deg, #f8c353, #f5a623);
    padding: 40px 0;
    text-align: center;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
  }
  
  .premium-banner::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: shimmer 3s infinite;
  }
  
  @keyframes shimmer {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .premium-banner h1 {
    color: #fff;
    font-size: 2.5rem;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
  }
  
  .premium-banner p {
    color: #fff;
    font-size: 1.2rem;
    max-width: 800px;
    margin: 0 auto;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
  }
  
  .premium-container {
    width: var(--container-width);
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .premium-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
    margin-top: 30px;
  }
  
  .premium-card-wrapper {
    position: relative;
    perspective: 1000px;
  }
  
  .premium-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }
  
  .premium-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 20px rgba(0,0,0,0.15);
  }
  
  /* Business Card Container - Responsive Centered */
  .business-card-container {
    margin: 20px auto;
    width: min(100%, 350px);
    height: 200px;
    perspective: 1000px;
    cursor: pointer;
    position: relative;
    z-index: 1;
  }
  
  .business-card-container::after {
    content: '';
    position: absolute;
    left: 10px;
    right: 10px;
    bottom: -8px;
    height: 15px;
    background: rgba(0,0,0,0.1);
    filter: blur(10px);
    border-radius: 50%;
    z-index: -1;
  }
  
  .business-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  
  .business-card-container.flipped .business-card-inner {
    transform: rotateY(180deg);
  }
  
  .business-card-front,
  .business-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border: 1px solid rgba(0,0,0,0.05);
  }
  
  .business-card-front::after,
  .business-card-back::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.4), 
                inset 0 0 30px rgba(0,0,0,0.03),
                inset 0 1px 3px rgba(0,0,0,0.05);
    pointer-events: none;
    border-radius: 7px;
  }
  
  .business-card-back {
    transform: rotateY(180deg);
    background: #f9f9f9;
  }
  
  .business-card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .business-card-display {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }
  
  .custom-business-card {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ffffff, #f8f8f8);
    display: flex;
    flex-direction: column;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: inset 0 0 30px rgba(0,0,0,0.02);
    position: relative;
  }
  
  .custom-business-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3Csvg width='6' height='6' viewBox='0 0 6 6' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f0f0f0' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M5 0h1L0 5v1H0z'/%3E%3Cpath d='M6 5v1H5z'/%3E%3C/g%3E%3C/svg%3E");
    opacity: 0.5;
    pointer-events: none;
  }
  
  .custom-card-header {
    background: linear-gradient(90deg, var(--premium-gold), #f8c353);
    color: white;
    padding: 10px;
    text-align: center;
    font-weight: bold;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    text-shadow: 0 1px 2px rgba(0,0,0,0.1);
    border-bottom: 1px solid rgba(0,0,0,0.05);
  }
  
  .custom-card-header i {
    font-size: 1.2rem;
  }
  
  .custom-card-content {
    padding: 10px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }
  
  .custom-card-row {
    display: flex;
    align-items: center;
    font-size: 0.8rem;
    line-height: 1.3;
  }
  
  .custom-card-row i {
    width: 20px;
    color: var(--premium-gold);
    margin-right: 5px;
    flex-shrink: 0;
  }
  
  .custom-card-footer {
    background: #f1f1f1;
    padding: 5px;
    text-align: center;
    font-size: 0.7rem;
    font-style: italic;
    color: #666;
    border-top: 1px solid rgba(0,0,0,0.05);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
  }
  
  /* Premium Discount Light Bulb Positioning */
  .card-promotion-indicator {
    position: absolute;
    top: 15px;
    right: 15px;
    z-index: 10;
  }
  
  .card-promotion-code {
    position: absolute;
    top: 15px;
    right: 60px;
    background-color: var(--premium-gold);
    color: white;
    padding: 5px 12px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    z-index: 10;
    animation: fadeInDown 0.5s ease;
    display: none; /* Hide promo code by default */
  }
  
  .discount-light-bulb {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: #ccc;
    border-radius: 50%;
    position: relative;
    opacity: 0.5;
    transition: all 0.3s ease;
    font-size: 18px;
    color: #666;
    cursor: pointer; /* Add cursor pointer to indicate it's clickable */
  }
  
  .discount-light-bulb.active {
    background: var(--bulb-glow-color);
    opacity: 1;
    box-shadow: 0 0 10px var(--bulb-glow-color);
    animation: bulbPulse 2s infinite;
    color: #fff;
  }
  
  @keyframes bulbPulse {
    0% { box-shadow: 0 0 0 0 rgba(245, 166, 35, 0.7); }
    70% { box-shadow: 0 0 0 10px rgba(245, 166, 35, 0); }
    100% { box-shadow: 0 0 0 0 rgba(245, 166, 35, 0); }
  }
  
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .premium-card-content {
    padding: 25px;
    flex-grow: 1;
    position: relative;
  }
  
  .premium-card-header {
    text-align: center;
    margin-bottom: 20px;
  }
  
  .premium-card-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 10px;
  }
  
  .premium-card-description {
    font-size: 1.1rem;
    color: #555;
    line-height: 1.6;
    margin: 0 auto 20px;
    max-width: 90%;
  }
  
  .card-flip-label {
    display: inline-block;
    margin-top: 10px;
    padding: 5px 15px;
    background-color: var(--premium-gold);
    color: #fff;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .card-flip-label:hover {
    background-color: var(--premium-gold-dark);
  }
  
  .premium-product-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid #f0f0f0;
    clear: both;
  }
  
  .premium-product-images {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    margin-top: 15px;
    justify-content: space-between;
  }
  
  .premium-product-image-container {
    width: calc(25% - 12px);
    position: relative;
    cursor: pointer;
    flex-shrink: 0;
    height: 0;
    padding-bottom: calc((25% - 12px) / 1.75);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    margin-bottom: 5px;
  }
  
  .premium-product-image-container:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  
  .premium-product-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
  }
  
  .premium-card-contact {
    margin-top: 20px;
    font-size: 1.1rem;
    color: #444;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
  }
  
  .premium-card-contact div {
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    flex-wrap: wrap;
  }
  
  .premium-card-contact i {
    width: 20px;
    margin-right: 10px;
    color: var(--premium-gold);
    flex-shrink: 0;
  }
  
  .premium-website {
    display: inline-block;
    margin-top: 15px;
    padding: 12px 30px;
    background-color: var(--premium-gold);
    color: #fff;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 600;
    transition: all 0.3s ease;
    text-align: center;
    width: 100%;
  }
  
  .premium-website:hover {
    background-color: var(--premium-gold-dark);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(245, 166, 35, 0.3);
    color: #fff;
  }
  
  .premium-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
    padding: 8px;
    border-radius: 50%;
    font-weight: 700;
    font-size: 0.8rem;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
  }
  
  .premium-badge i {
    font-size: 0.9rem;
  }

  .no-results {
    grid-column: 1 / -1;
    text-align: center;
    padding: 60px 20px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
  }

  .no-results i {
    font-size: 4rem;
    color: #ddd;
    margin-bottom: 20px;
  }

  .no-results h3 {
    color: #333;
    margin-bottom: 10px;
  }

  .no-results p {
    color: #666;
  }
  
  /* Enhanced Responsive Design - Mobile First Approach */
  
  /* Large Tablets and Small Desktops (1024px and down) */
  @media (max-width: 1024px) {
    .premium-container {
      width: 95%;
      padding: 15px;
    }
    
    .premium-grid {
      gap: 25px;
    }
    
    .premium-card-content {
      padding: 20px;
    }
    
    .premium-card-title {
      font-size: 1.6rem;
    }
    
    .premium-card-description {
      font-size: 1rem;
    }
    
    .business-card-container {
      width: min(100%, 320px);
      height: 180px;
    }
  }
  
  /* Tablets (768px and down) */
  @media (max-width: 768px) {
    :root {
      --container-width: 95%;
    }
    
    .premium-banner {
      padding: 30px 0;
    }
    
    .premium-banner h1 {
      font-size: 2rem;
    }
    
    .premium-banner p {
      font-size: 1rem;
      padding: 0 15px;
    }
    
    .premium-grid {
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    .premium-card-content {
      padding: 18px;
    }
    
    .premium-card-title {
      font-size: 1.5rem;
    }
    
    .premium-card-description {
      font-size: 0.95rem;
      line-height: 1.5;
    }
    
    .business-card-container {
      width: min(100%, 300px);
      height: 170px;
      margin: 15px auto;
    }
    
    .custom-card-header {
      font-size: 0.9rem;
      padding: 8px;
    }
    
    .custom-card-content {
      padding: 8px;
      gap: 4px;
    }
    
    .custom-card-row {
      font-size: 0.75rem;
    }
    
    .custom-card-row i {
      width: 18px;
      margin-right: 4px;
    }
    
    .premium-product-images {
      justify-content: center;
      gap: 12px;
    }
    
    .premium-product-image-container {
      width: calc(50% - 6px);
      padding-bottom: calc((50% - 6px) / 1.75);
    }
    
    .premium-card-contact {
      font-size: 1rem;
      padding: 12px;
    }
    
    .premium-card-contact div {
      margin-bottom: 6px;
    }
    
    .card-promotion-code {
      right: 55px;
      font-size: 0.8rem;
      padding: 4px 10px;
    }
    
    .card-promotion-indicator {
      top: 12px;
      right: 12px;
    }
    
    .discount-light-bulb {
      width: 32px;
      height: 32px;
      font-size: 16px;
    }
    
    .premium-badge {
      top: 12px;
      left: 12px;
      font-size: 0.75rem;
      padding: 4px 12px;
    }
  }
  
  /* Mobile Landscape and Small Tablets (640px and down) */
  @media (max-width: 640px) {
    .premium-container {
      padding: 12px;
    }
    
    .premium-grid {
      gap: 18px;
    }
    
    .premium-card-content {
      padding: 15px;
    }
    
    .premium-card-title {
      font-size: 1.4rem;
    }
    
    .business-card-container {
      width: min(100%, 280px);
      height: 160px;
    }
    
    .premium-product-images {
      gap: 10px;
    }
    
    .premium-product-image-container {
      width: calc(50% - 5px);
      padding-bottom: calc((50% - 5px) / 1.75);
    }
  }
  
  /* Mobile Portrait (480px and down) */
  @media (max-width: 480px) {
    .premium-banner {
      padding: 25px 0;
    }
    
    .premium-banner h1 {
      font-size: 1.8rem;
    }
    
    .premium-banner p {
      font-size: 0.95rem;
    }
    
    .premium-container {
      width: 98%;
      padding: 10px;
    }
    
    .premium-grid {
      gap: 15px;
    }
    
    .premium-card-content {
      padding: 12px;
    }
    
    .premium-card-title {
      font-size: 1.3rem;
      margin-bottom: 8px;
    }
    
    .premium-card-description {
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
    
    .business-card-container {
      width: min(100%, 260px);
      height: 148px;
      margin: 12px auto;
    }
    
    .custom-card-header {
      font-size: 0.8rem;
      padding: 6px;
    }
    
    .custom-card-header i {
      font-size: 1rem;
    }
    
    .custom-card-content {
      padding: 6px;
    }
    
    .custom-card-row {
      font-size: 0.7rem;
      line-height: 1.2;
    }
    
    .custom-card-row i {
      width: 16px;
      margin-right: 3px;
    }
    
    .custom-card-footer {
      font-size: 0.65rem;
      padding: 4px;
    }
    
    .premium-product-images {
      justify-content: space-between;
    }
    
    .premium-product-image-container {
      width: calc(50% - 5px);
      padding-bottom: calc((50% - 5px) / 1.75);
    }
    
    .premium-card-contact {
      font-size: 0.9rem;
      padding: 10px;
    }
    
    .premium-card-contact i {
      width: 18px;
      margin-right: 8px;
    }
    
    .premium-website {
      padding: 10px 20px;
      font-size: 0.9rem;
    }
    
    .card-promotion-code {
      right: 50px;
      font-size: 0.75rem;
      padding: 3px 8px;
      top: 12px;
    }
    
    .card-promotion-indicator {
      top: 10px;
      right: 10px;
    }
    
    .discount-light-bulb {
      width: 30px;
      height: 30px;
      font-size: 14px;
    }
    
    .premium-badge {
      top: 10px;
      left: 10px;
      font-size: 0.7rem;
      padding: 6px;
      width: 25px;
      height: 25px;
    }
    
    .card-flip-label {
      font-size: 0.8rem;
      padding: 4px 12px;
    }
  }
  
  /* Very Small Mobile (360px and down) */
  @media (max-width: 360px) {
    .premium-banner h1 {
      font-size: 1.6rem;
    }
    
    .premium-banner p {
      font-size: 0.9rem;
    }
    
    .business-card-container {
      width: min(100%, 240px);
      height: 137px;
    }
    
    .premium-card-title {
      font-size: 1.2rem;
    }
    
    .premium-card-description {
      font-size: 0.85rem;
    }
    
    .custom-card-row {
      font-size: 0.65rem;
    }
    
    .premium-card-contact {
      font-size: 0.85rem;
    }
    
    .premium-product-image-container {
      width: 100%;
      padding-bottom: calc(100% / 1.75);
      max-width: 280px;
      margin: 0 auto 8px;
    }
    
    .premium-product-images {
      flex-direction: column;
      align-items: center;
    }
    
    .card-promotion-code {
      right: 45px;
      font-size: 0.7rem;
      padding: 2px 6px;
    }
    
    .discount-light-bulb {
      width: 28px;
      height: 28px;
      font-size: 12px;
    }
  }
  
  /* Touch Device Optimizations */
  @media (hover: none) and (pointer: coarse) {
    .premium-card:hover {
      transform: none;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    }
    
    .premium-product-image-container:hover {
      transform: none;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .premium-website:hover {
      transform: none;
      box-shadow: none;
    }
    
    .card-flip-label:hover {
      background-color: var(--premium-gold);
    }
    
    /* Increase touch targets */
    .business-card-container {
      min-height: 44px;
    }
    
    .card-flip-label {
      padding: 8px 16px;
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    
    .premium-website {
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .premium-product-image-container {
      min-height: 44px;
    }
  }
  
  /* Improve text readability on small screens */
  @media (max-width: 480px) {
    .custom-card-row span {
      word-break: break-word;
      hyphens: auto;
    }
    
    .premium-card-contact div {
      word-break: break-word;
    }
  }
  
  /* Handle very wide screens */
  @media (min-width: 1400px) {
    .premium-container {
      max-width: 1300px;
    }
    
    .premium-grid {
      gap: 35px;
    }
  }
</style>
{% endblock %}

{% block content %}
  <!-- Premium Banner -->
  <div class="premium-banner">
    <div class="premium-container">
      <h1>Premium Business Listings</h1>
      <p>Discover our featured premium businesses with enhanced profiles and exclusive offers.</p>
    </div>
  </div>

  <!-- Premium Business Listings -->
  <div class="premium-container">
    <div class="premium-grid">
      <!-- DUMMY DATA: Luxury Interior Design -->
      <div class="premium-card-wrapper">
        <div class="premium-badge">
          <i class="fas fa-crown"></i>
        </div>
        
        <div class="premium-card">
          <div class="premium-card-content">
            <div class="premium-card-header">
              <h2 class="premium-card-title">Elegant Interiors</h2>
              <p class="premium-card-description">Luxury interior design services specializing in high-end residential and commercial spaces. Our team of experienced designers creates bespoke interiors that reflect your unique style and personality.</p>
            </div>
            
            <!-- New positioned light bulb indicator -->
            <div class="card-promotion-indicator">
              <div class="discount-light-bulb active" title="Active Promotion!"><i class="fas fa-lightbulb"></i></div>
            </div>
            <div class="card-promotion-code">ELEGANCE25</div>
            
            <!-- Business Card with Flip Animation -->
            <div class="business-card-container" id="card-elegant">
              <div class="business-card-inner">
                <div class="business-card-front">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-header">
                        <i class="fas fa-home"></i> ELEGANT INTERIORS
                      </div>
                      <div class="custom-card-content">
                        <div class="custom-card-row">
                          <i class="fas fa-user"></i> <span>Victoria Roberts, Principal Designer</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-phone"></i> <span>(555) 123-4567</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-envelope"></i> <span>contact@elegantinteriors.com</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-map-marker-alt"></i> <span>123 Design Ave, New York, NY 10001</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-paint-brush"></i> <span>Interior Design • Consultations • Project Management</span>
                        </div>
                      </div>
                      <div class="custom-card-footer">
                        "Transforming spaces into extraordinary experiences"
                      </div>
                    </div>
                  </div>
                </div>
                <div class="business-card-back">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-content" style="padding: 20px; text-align: center;">
                        <h3 style="margin-bottom: 10px;">Our Services</h3>
                        <ul style="text-align: left; font-size: 0.8rem; padding-left: 20px;">
                          <li>Residential Design</li>
                          <li>Commercial Spaces</li>
                          <li>Color Consultations</li>
                          <li>Furniture Selection</li>
                          <li>Project Management</li>
                          <li>Lighting Design</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.8rem;">Schedule your consultation today!</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="text-align: center;">
              <span class="card-flip-label" onclick="flipCard('elegant')">
                <span class="flip-text">Back Side</span>
              </span>
            </div>
            
            <div class="premium-card-contact">
              <div><i class="fas fa-map-marker-alt"></i> 123 Design Avenue, New York, NY 10001</div>
              <div><i class="fas fa-phone"></i> (555) 123-4567</div>
              <div><i class="fas fa-envelope"></i> contact@elegantinteriors.com</div>
            </div>
            
            <a href="#" class="premium-website" target="_blank">
              <i class="fas fa-external-link-alt"></i> Visit Website
            </a>
            
            <div class="premium-product-section">
              <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                <i class="fas fa-images"></i> Recent Projects
              </h3>
              <div class="premium-product-images">
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?luxury-interior')">
                  <img src="https://source.unsplash.com/random/800x600/?luxury-interior" alt="Luxury Interior Project" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?modern-decor')">
                  <img src="https://source.unsplash.com/random/800x600/?modern-decor" alt="Modern Decor Project" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?interior-design')">
                  <img src="https://source.unsplash.com/random/800x600/?interior-design" alt="Interior Design Project" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?apartment-design')">
                  <img src="https://source.unsplash.com/random/800x600/?apartment-design" alt="Apartment Design Project" class="premium-product-image">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- DUMMY DATA: Tech Gadget Store -->
      <div class="premium-card-wrapper">
        <div class="premium-badge">
          <i class="fas fa-crown"></i>
        </div>
        
        <div class="premium-card">
          <div class="premium-card-content">
            <div class="premium-card-header">
              <h2 class="premium-card-title">TechHub Gadgets</h2>
              <p class="premium-card-description">Your one-stop shop for cutting-edge technology and smart home devices. We offer the latest gadgets, expert advice, and professional installation services for all your tech needs.</p>
            </div>
            
            <!-- New positioned light bulb indicator -->
            <div class="card-promotion-indicator">
              <div class="discount-light-bulb active" title="Active Promotion!"><i class="fas fa-lightbulb"></i></div>
            </div>
            <div class="card-promotion-code">TECH20</div>
            
            <!-- Business Card with Flip Animation -->
            <div class="business-card-container" id="card-techhub">
              <div class="business-card-inner">
                <div class="business-card-front">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-header" style="background: linear-gradient(90deg, #2962ff, #3f51b5);">
                        <i class="fas fa-microchip"></i> TECHHUB GADGETS
                      </div>
                      <div class="custom-card-content">
                        <div class="custom-card-row">
                          <i class="fas fa-user"></i> <span>James Chen, Owner</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-phone"></i> <span>(555) 987-6543</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-envelope"></i> <span>sales@techhubgadgets.com</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-map-marker-alt"></i> <span>456 Tech Boulevard, San Francisco, CA 94107</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-tablet-alt"></i> <span>Smart Devices • Gadgets • Installation</span>
                        </div>
                      </div>
                      <div class="custom-card-footer">
                        "Tomorrow's technology today"
                      </div>
                    </div>
                  </div>
                </div>
                <div class="business-card-back">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-content" style="padding: 20px; text-align: center;">
                        <h3 style="margin-bottom: 10px;">Store Hours</h3>
                        <div style="font-size: 0.8rem; text-align: left; margin: 0 auto; width: 80%;">
                          <div style="display: flex; justify-content: space-between;">
                            <span>Monday - Friday:</span>
                            <span>9am - 8pm</span>
                          </div>
                          <div style="display: flex; justify-content: space-between;">
                            <span>Saturday:</span>
                            <span>10am - 6pm</span>
                          </div>
                          <div style="display: flex; justify-content: space-between;">
                            <span>Sunday:</span>
                            <span>11am - 5pm</span>
                          </div>
                        </div>
                        <p style="margin-top: 15px; font-size: 0.8rem; color: #2962ff;">
                          <i class="fas fa-tag"></i> Current promotion: 20% off all smart home devices!
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="text-align: center;">
              <span class="card-flip-label" onclick="flipCard('techhub')">
                <span class="flip-text">Back Side</span>
              </span>
            </div>
            
            <div class="premium-card-contact">
              <div><i class="fas fa-map-marker-alt"></i> 456 Tech Boulevard, San Francisco, CA 94107</div>
              <div><i class="fas fa-phone"></i> (555) 987-6543</div>
              <div><i class="fas fa-envelope"></i> sales@techhubgadgets.com</div>
            </div>
            
            <a href="#" class="premium-website" target="_blank">
              <i class="fas fa-external-link-alt"></i> Visit Website
            </a>
            
            <div class="premium-product-section">
              <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                <i class="fas fa-images"></i> Featured Products
              </h3>
              <div class="premium-product-images">
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?smart-home')">
                  <img src="https://source.unsplash.com/random/800x600/?smart-home" alt="Smart Home Products" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?tech-gadgets')">
                  <img src="https://source.unsplash.com/random/800x600/?tech-gadgets" alt="Tech Gadgets" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?smartphone')">
                  <img src="https://source.unsplash.com/random/800x600/?smartphone" alt="Smartphone Products" class="premium-product-image">
                </div>
                <div class="premium-product-image-container" onclick="openImageModal('https://source.unsplash.com/random/800x600/?wearable-tech')">
                  <img src="https://source.unsplash.com/random/800x600/?wearable-tech" alt="Wearable Tech Products" class="premium-product-image">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      {% for business in premium_businesses %}
        <div class="premium-card-wrapper">
          <div class="premium-badge">
            <i class="fas fa-crown"></i>
          </div>
          
          <div class="premium-card">
            <div class="premium-card-content">
              <div class="premium-card-header">
                <h2 class="premium-card-title">{{ business.name }}</h2>
                <p class="premium-card-description">{{ business.description }}</p>
              </div>
              
              <!-- New positioned light bulb indicator -->
              {% if business.promotions.exists %}
              <div class="card-promotion-indicator">
                <div class="discount-light-bulb active" title="Active Promotion!"><i class="fas fa-lightbulb"></i></div>
              </div>
              <div class="card-promotion-code">{{ business.promotions.first.code|default:"PROMO2025" }}</div>
              {% else %}
              <div class="card-promotion-indicator">
                <div class="discount-light-bulb" title="No active promotions"><i class="fas fa-lightbulb"></i></div>
              </div>
              {% endif %}
              
              <!-- Business Card with Flip Animation -->
              <div class="business-card-container" id="card-{{ business.id }}">
                <div class="business-card-inner">
                  <div class="business-card-front">
                    {% if business.business_cards.exists and business.business_cards.first.front_image %}
                      <img src="{{ business.business_cards.first.front_image.url }}" 
                           alt="{{ business.name }} Business Card Front" 
                           class="business-card-image">
                    {% else %}
                      <div class="business-card-display">
                        <div class="custom-business-card">
                          <div class="custom-card-header">
                            <i class="fas fa-building"></i> {{ business.name|upper }}
                          </div>
                          <div class="custom-card-content">
                            <div class="custom-card-row">
                              <i class="fas fa-user"></i> <span>{{ business.owner.get_full_name|default:"Business Owner" }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-phone"></i> <span>{{ business.phone }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-envelope"></i> <span>{{ business.email }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-map-marker-alt"></i> <span>{{ business.address.city }}, {{ business.address.state }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-tag"></i> <span>
                                {% for category in business.categories.all|slice:":2" %}
                                  {{ category.name }}{% if not forloop.last %} • {% endif %}
                                {% empty %}
                                  Professional Services
                                {% endfor %}
                              </span>
                            </div>
                          </div>
                          <div class="custom-card-footer">
                            "Quality service you can trust"
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  <div class="business-card-back">
                    {% if business.business_cards.exists and business.business_cards.first.back_image %}
                      <img src="{{ business.business_cards.first.back_image.url }}" 
                           alt="{{ business.name }} Business Card Back" 
                           class="business-card-image">
                    {% else %}
                      <div class="business-card-display">
                        <div class="custom-business-card">
                          <div class="custom-card-content" style="padding: 20px; text-align: center;">
                            <h3 style="margin-bottom: 10px;">Our Services</h3>
                            <ul style="text-align: left; font-size: 0.8rem; padding-left: 20px;">
                              {% for category in business.categories.all %}
                                <li>{{ category.name }}</li>
                              {% empty %}
                                <li>Professional Services</li>
                                <li>Quality Products</li>
                                <li>Customer Support</li>
                              {% endfor %}
                            </ul>
                            {% if business.website %}
                              <p style="margin-top: 10px; font-size: 0.8rem;">Visit our website: {{ business.website }}</p>
                            {% endif %}
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div style="text-align: center;">
                <span class="card-flip-label" onclick="flipCard('{{ business.id }}')">
                  <span class="flip-text">Back Side</span>
                </span>
              </div>
              
              <div class="premium-card-contact">
                <div><i class="fas fa-map-marker-alt"></i> {{ business.address }}</div>
                <div><i class="fas fa-phone"></i> {{ business.phone }}</div>
                <div><i class="fas fa-envelope"></i> {{ business.email }}</div>
              </div>
              
              {% if business.website %}
                <a href="{{ business.website }}" class="premium-website" target="_blank">
                  <i class="fas fa-external-link-alt"></i> Visit Website
                </a>
              {% endif %}
              
              {% if business.images.all|length > 0 %}
                <div class="premium-product-section">
                  <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                    <i class="fas fa-images"></i> Product Gallery
                  </h3>
                  <div class="premium-product-images">
                    {% for image in business.images.all %}
                      <div class="premium-product-image-container" onclick="openImageModal('{{ image.image.url }}')">
                        <img src="{{ image.image.url }}" 
                             alt="{{ business.name }} - {{ image.caption }}" 
                             class="premium-product-image">
                      </div>
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      {% empty %}
        <div class="no-results">
          <i class="fas fa-store-slash" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
          <h3>No Premium Businesses Available</h3>
          <p style="color: #666;">Check back later for featured premium businesses in your area.</p>
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize card flip on click
    const businessCards = document.querySelectorAll('.business-card-container');
    businessCards.forEach(card => {
      card.addEventListener('click', function() {
        const businessId = this.id.replace('card-', '');
        flipCard(businessId);
        
        // Add tilt effect for realistic card feel (only on non-touch devices)
        if (window.matchMedia('(hover: hover)').matches) {
          addTiltEffect(this);
        }
      });
    });
    
    // Add click event listeners to light bulbs
    const lightBulbs = document.querySelectorAll('.discount-light-bulb');
    lightBulbs.forEach(bulb => {
      bulb.addEventListener('click', function(e) {
        e.stopPropagation(); // Prevent card flip when clicking the bulb
        const promoCode = this.closest('.premium-card-content').querySelector('.card-promotion-code');
        if (promoCode) {
          // Toggle the promo code visibility
          if (promoCode.style.display === 'block') {
            promoCode.style.display = 'none';
          } else {
            promoCode.style.display = 'block';
          }
        }
      });
    });
  });
  
  // 3D tilt effect for business cards (desktop only)
  function addTiltEffect(element) {
    element.addEventListener('mousemove', function(e) {
      const cardWidth = this.offsetWidth;
      const cardHeight = this.offsetHeight;
      const centerX = this.offsetLeft + cardWidth/2;
      const centerY = this.offsetTop + cardHeight/2;
      const mouseX = e.clientX - centerX;
      const mouseY = e.clientY - centerY;
      const rotateY = -5 * mouseX / (cardWidth/2);
      const rotateX = 5 * mouseY / (cardHeight/2);
      
      // Limit the rotation to a subtle effect
      const limitedRotateX = Math.min(Math.max(rotateX, -5), 5);
      const limitedRotateY = Math.min(Math.max(rotateY, -5), 5);
      
      this.querySelector('.business-card-inner').style.transform = 
        `perspective(1000px) rotateX(${limitedRotateX}deg) rotateY(${limitedRotateY}deg)`;
    });
    
    element.addEventListener('mouseleave', function() {
      this.querySelector('.business-card-inner').style.transform = 'perspective(1000px) rotateX(0) rotateY(0)';
    });
  }
  
  function flipCard(businessId) {
    const card = document.getElementById('card-' + businessId);
    const flipLabel = card.nextElementSibling.querySelector('.flip-text');
    
    if (card) {
      card.classList.toggle('flipped');
      // Update label text
      if (card.classList.contains('flipped')) {
        flipLabel.textContent = 'Front Side';
      } else {
        flipLabel.textContent = 'Back Side';
      }
      
      // Reset any tilt when flipping
      card.querySelector('.business-card-inner').style.transform = card.classList.contains('flipped') ? 
        'rotateY(180deg)' : 'rotateY(0deg)';
    }
  }
  
  function openImageModal(imageUrl) {
    // Simple image modal (you can enhance this with a proper lightbox library)
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: pointer;
    `;
    
    const img = document.createElement('img');
    img.src = imageUrl;
    img.style.cssText = `
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
    `;
    
    modal.appendChild(img);
    document.body.appendChild(modal);
    
    modal.addEventListener('click', function() {
      document.body.removeChild(modal);
    });
    
    // Close modal on escape key
    document.addEventListener('keydown', function escapeHandler(e) {
      if (e.key === 'Escape') {
        if (document.body.contains(modal)) {
          document.body.removeChild(modal);
        }
        document.removeEventListener('keydown', escapeHandler);
      }
    });
  }
  
  // Improved touch handling for mobile devices
  if ('ontouchstart' in window) {
    const cards = document.querySelectorAll('.business-card-container');
    cards.forEach(card => {
      let touchStartTime;
      
      card.addEventListener('touchstart', function(e) {
        touchStartTime = Date.now();
      });
      
      card.addEventListener('touchend', function(e) {
        const touchDuration = Date.now() - touchStartTime;
        // Only trigger flip on quick taps (not long presses or swipes)
        if (touchDuration < 200) {
          e.preventDefault();
          const businessId = this.id.replace('card-', '');
          flipCard(businessId);
        }
      });
    });
  }
</script>
{% endblock %}