{% extends "base.html" %}
{% load static %}

{% block title %}Premium Businesses - Business Directory 2.0{% endblock %}

{% block extra_css %}
<style>
  /* Premium page specific styling */
  :root {
    --premium-gold: #f5a623;
    --premium-gold-dark: #e09000;
    --flash-duration: 2s;
  }

  .premium-banner {
    background: linear-gradient(135deg, #f8c353, #f5a623);
    padding: 40px 0;
    text-align: center;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
  }
  
  .premium-banner::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: shimmer 3s infinite;
  }
  
  @keyframes shimmer {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  
  .premium-banner h1 {
    color: #fff;
    font-size: 2.5rem;
    margin-bottom: 10px;
    text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
  }
  
  .premium-banner p {
    color: #fff;
    font-size: 1.2rem;
    max-width: 800px;
    margin: 0 auto;
    text-shadow: 0 1px 2px rgba(0,0,0,0.2);
    position: relative;
    z-index: 1;
  }
  
  .premium-container {
    width: var(--container-width);
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
  }
  
  .premium-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
    margin-top: 30px;
  }
  
  .premium-card-wrapper {
    position: relative;
    perspective: 1000px;
  }
  
  .premium-card {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(0,0,0,0.1);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    height: 100%;
    position: relative;
  }
  
  .premium-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 20px rgba(0,0,0,0.15);
  }
  
  /* Business Card Container - Centered */
  .business-card-container {
    margin: 20px auto;
    width: 300px;
    height: 180px;
    perspective: 1000px;
    cursor: pointer;
  }
  
  .business-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
  }
  
  .business-card-container.flipped .business-card-inner {
    transform: rotateY(180deg);
  }
  
  .business-card-front,
  .business-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  
  .business-card-back {
    transform: rotateY(180deg);
    background: #f9f9f9;
  }
  
  .business-card-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  /* Enhanced Business Card Styling */
  .business-card-display {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  }
  
  .custom-business-card {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #ffffff, #f5f5f5);
    display: flex;
    flex-direction: column;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  }
  
  .custom-card-header {
    background: linear-gradient(90deg, var(--premium-gold), #f8c353);
    color: white;
    padding: 10px;
    text-align: center;
    font-weight: bold;
    font-size: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
  }
  
  .custom-card-header i {
    font-size: 1.2rem;
  }
  
  .custom-card-content {
    padding: 10px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 5px;
  }
  
  .custom-card-row {
    display: flex;
    align-items: center;
    font-size: 0.8rem;
    line-height: 1.3;
  }
  
  .custom-card-row i {
    width: 20px;
    color: var(--premium-gold);
    margin-right: 5px;
  }
  
  .custom-card-footer {
    background: #f1f1f1;
    padding: 5px;
    text-align: center;
    font-size: 0.7rem;
    font-style: italic;
    color: #666;
  }
  
  /* Premium Discount Light Bulb - Below Business Card */
  .discount-light-container {
    position: relative;
    margin: 15px auto;
    text-align: center;
  }
  
  .discount-light-bulb {
    display: inline-block;
    width: 50px;
    height: 50px;
    background: radial-gradient(circle at 30% 30%, #fff700, #f5a623);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    position: relative;
    box-shadow: 0 0 20px rgba(245, 166, 35, 0.5);
    cursor: pointer;
  }
  
  .discount-light-bulb::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 10px;
    background: #666;
    border-radius: 2px;
  }
  
  .discount-light-bulb::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 20px;
    height: 8px;
    background: #333;
    border-radius: 0 0 5px 5px;
  }
  
  /* Flashing Animation - 2 second intervals */
  .discount-light-bulb.active {
    animation: lightFlash var(--flash-duration) infinite;
  }
  
  @keyframes lightFlash {
    0%, 100% {
      box-shadow: 0 0 20px rgba(245, 166, 35, 0.5);
      background: radial-gradient(circle at 30% 30%, #fff700, #f5a623);
    }
    50% {
      box-shadow: 0 0 40px rgba(245, 166, 35, 1), 0 0 60px rgba(245, 166, 35, 0.8);
      background: radial-gradient(circle at 30% 30%, #ffffff, #fff700);
    }
  }
  
  .promotion-code {
    display: inline-block;
    margin-left: 15px;
    background-color: #fff;
    color: #333;
    padding: 5px 12px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    border: 2px solid var(--premium-gold);
  }
  
  .premium-card-content {
    padding: 25px;
    flex-grow: 1;
  }
  
  .premium-card-header {
    text-align: center;
    margin-bottom: 20px;
  }
  
  .premium-card-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #333;
    margin-bottom: 10px;
  }
  
  .premium-card-description {
    font-size: 1.1rem;
    color: #555;
    line-height: 1.6;
    margin: 0 auto 20px;
    max-width: 90%;
  }
  
  /* Card Flip Label */
  .card-flip-label {
    display: inline-block;
    margin-top: 10px;
    padding: 5px 15px;
    background-color: var(--premium-gold);
    color: #fff;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .card-flip-label:hover {
    background-color: var(--premium-gold-dark);
  }
  
  /* Product Images Section */
  .premium-product-section {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid #f0f0f0;
  }
  
  .premium-product-images {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-top: 15px;
  }
  
  .premium-product-image {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 8px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
  }
  
  .premium-product-image:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
  }
  
  .premium-card-contact {
    margin-top: 20px;
    font-size: 1.1rem;
    color: #444;
    background-color: #f8f9fa;
    padding: 15px;
    border-radius: 8px;
  }
  
  .premium-card-contact div {
    margin-bottom: 8px;
    display: flex;
    align-items: center;
  }
  
  .premium-card-contact i {
    width: 20px;
    margin-right: 10px;
    color: var(--premium-gold);
  }
  
  .premium-website {
    display: inline-block;
    margin-top: 15px;
    padding: 12px 30px;
    background-color: var(--premium-gold);
    color: #fff;
    text-decoration: none;
    border-radius: 6px;
    font-weight: 600;
    transition: all 0.3s ease;
    text-align: center;
    width: 100%;
  }
  
  .premium-website:hover {
    background-color: var(--premium-gold-dark);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(245, 166, 35, 0.3);
  }
  
  /* Premium Badge */
  .premium-badge {
    position: absolute;
    top: 15px;
    left: 15px;
    background: linear-gradient(135deg, #ffd700, #ffed4e);
    color: #333;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.8rem;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .premium-badge i {
    font-size: 0.9rem;
  }

  /* Sample Product Image */
  .sample-product {
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  @media (max-width: 768px) {
    .premium-grid {
      grid-template-columns: 1fr;
    }
    
    .premium-product-images {
      grid-template-columns: 1fr;
    }
    
    .business-card-container {
      width: 250px;
      height: 150px;
    }
  }
</style>
{% endblock %}

{% block content %}
  <!-- Premium Banner -->
  <div class="premium-banner">
    <div class="premium-container">
      <h1>Premium Business Listings</h1>
      <p>Discover our featured premium businesses with enhanced profiles and exclusive offers.</p>
    </div>
  </div>

  <!-- Premium Business Listings -->
  <div class="premium-container">
    <div class="premium-grid">
      <!-- DUMMY DATA: Luxury Interior Design -->
      <div class="premium-card-wrapper">
        <div class="premium-badge">
          <i class="fas fa-crown"></i>
          PREMIUM
        </div>
        
        <div class="premium-card">
          <div class="premium-card-content">
            <div class="premium-card-header">
              <h2 class="premium-card-title">Elegant Interiors</h2>
              <p class="premium-card-description">Luxury interior design services specializing in high-end residential and commercial spaces. Our team of experienced designers creates bespoke interiors that reflect your unique style and personality.</p>
            </div>
            
            <!-- Business Card with Flip Animation -->
            <div class="business-card-container" id="card-elegant">
              <div class="business-card-inner">
                <div class="business-card-front">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-header">
                        <i class="fas fa-home"></i> ELEGANT INTERIORS
                      </div>
                      <div class="custom-card-content">
                        <div class="custom-card-row">
                          <i class="fas fa-user"></i> <span>Victoria Roberts, Principal Designer</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-phone"></i> <span>(555) 123-4567</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-envelope"></i> <span>contact@elegantinteriors.com</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-map-marker-alt"></i> <span>123 Design Ave, New York, NY 10001</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-paint-brush"></i> <span>Interior Design • Consultations • Project Management</span>
                        </div>
                      </div>
                      <div class="custom-card-footer">
                        "Transforming spaces into extraordinary experiences"
                      </div>
                    </div>
                  </div>
                </div>
                <div class="business-card-back">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-content" style="padding: 20px; text-align: center;">
                        <h3 style="margin-bottom: 10px;">Our Services</h3>
                        <ul style="text-align: left; font-size: 0.8rem; padding-left: 20px;">
                          <li>Residential Design</li>
                          <li>Commercial Spaces</li>
                          <li>Color Consultations</li>
                          <li>Furniture Selection</li>
                          <li>Project Management</li>
                          <li>Lighting Design</li>
                        </ul>
                        <p style="margin-top: 10px; font-size: 0.8rem;">Schedule your consultation today!</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="text-align: center;">
              <span class="card-flip-label" onclick="flipCard('elegant')">
                <span class="flip-text">Back Side</span>
              </span>
            </div>
            
            <!-- Discount Light Bulb Below Card -->
            <div class="discount-light-container">
              <div class="discount-light-bulb active" title="Active Promotion!"></div>
              <span class="promotion-code">ELEGANCE25</span>
            </div>
            
            <div class="premium-card-contact">
              <div><i class="fas fa-map-marker-alt"></i> 123 Design Avenue, New York, NY 10001</div>
              <div><i class="fas fa-phone"></i> (555) 123-4567</div>
              <div><i class="fas fa-envelope"></i> contact@elegantinteriors.com</div>
            </div>
            
            <a href="#" class="premium-website" target="_blank">
              <i class="fas fa-external-link-alt"></i> Visit Website
            </a>
            
            <div class="premium-product-section">
              <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                <i class="fas fa-images"></i> Recent Projects
              </h3>
              <div class="premium-product-images">
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?luxury-interior')">
                  <img src="https://source.unsplash.com/random/800x600/?luxury-interior" alt="Luxury Interior Project" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?modern-decor')">
                  <img src="https://source.unsplash.com/random/800x600/?modern-decor" alt="Modern Decor Project" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?interior-design')">
                  <img src="https://source.unsplash.com/random/800x600/?interior-design" alt="Interior Design Project" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?apartment-design')">
                  <img src="https://source.unsplash.com/random/800x600/?apartment-design" alt="Apartment Design Project" class="premium-product-image">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- DUMMY DATA: Tech Gadget Store -->
      <div class="premium-card-wrapper">
        <div class="premium-badge">
          <i class="fas fa-crown"></i>
          PREMIUM
        </div>
        
        <div class="premium-card">
          <div class="premium-card-content">
            <div class="premium-card-header">
              <h2 class="premium-card-title">TechHub Gadgets</h2>
              <p class="premium-card-description">Your one-stop shop for cutting-edge technology and smart home devices. We offer the latest gadgets, expert advice, and professional installation services for all your tech needs.</p>
            </div>
            
            <!-- Business Card with Flip Animation -->
            <div class="business-card-container" id="card-techhub">
              <div class="business-card-inner">
                <div class="business-card-front">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-header" style="background: linear-gradient(90deg, #2962ff, #3f51b5);">
                        <i class="fas fa-microchip"></i> TECHHUB GADGETS
                      </div>
                      <div class="custom-card-content">
                        <div class="custom-card-row">
                          <i class="fas fa-user"></i> <span>James Chen, Owner</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-phone"></i> <span>(555) 987-6543</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-envelope"></i> <span>sales@techhubgadgets.com</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-map-marker-alt"></i> <span>456 Tech Boulevard, San Francisco, CA 94107</span>
                        </div>
                        <div class="custom-card-row">
                          <i class="fas fa-tablet-alt"></i> <span>Smart Devices • Gadgets • Installation</span>
                        </div>
                      </div>
                      <div class="custom-card-footer">
                        "Tomorrow's technology today"
                      </div>
                    </div>
                  </div>
                </div>
                <div class="business-card-back">
                  <div class="business-card-display">
                    <div class="custom-business-card">
                      <div class="custom-card-content" style="padding: 20px; text-align: center;">
                        <h3 style="margin-bottom: 10px;">Store Hours</h3>
                        <div style="font-size: 0.8rem; text-align: left; margin: 0 auto; width: 80%;">
                          <div style="display: flex; justify-content: space-between;">
                            <span>Monday - Friday:</span>
                            <span>9am - 8pm</span>
                          </div>
                          <div style="display: flex; justify-content: space-between;">
                            <span>Saturday:</span>
                            <span>10am - 6pm</span>
                          </div>
                          <div style="display: flex; justify-content: space-between;">
                            <span>Sunday:</span>
                            <span>11am - 5pm</span>
                          </div>
                        </div>
                        <p style="margin-top: 15px; font-size: 0.8rem; color: #2962ff;">
                          <i class="fas fa-tag"></i> Current promotion: 20% off all smart home devices!
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div style="text-align: center;">
              <span class="card-flip-label" onclick="flipCard('techhub')">
                <span class="flip-text">Back Side</span>
              </span>
            </div>
            
            <!-- Discount Light Bulb Below Card -->
            <div class="discount-light-container">
              <div class="discount-light-bulb active" title="Active Promotion!"></div>
              <span class="promotion-code">TECH20</span>
            </div>
            
            <div class="premium-card-contact">
              <div><i class="fas fa-map-marker-alt"></i> 456 Tech Boulevard, San Francisco, CA 94107</div>
              <div><i class="fas fa-phone"></i> (555) 987-6543</div>
              <div><i class="fas fa-envelope"></i> sales@techhubgadgets.com</div>
            </div>
            
            <a href="#" class="premium-website" target="_blank">
              <i class="fas fa-external-link-alt"></i> Visit Website
            </a>
            
            <div class="premium-product-section">
              <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                <i class="fas fa-images"></i> Featured Products
              </h3>
              <div class="premium-product-images">
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?smart-home')">
                  <img src="https://source.unsplash.com/random/800x600/?smart-home" alt="Smart Home Products" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?tech-gadgets')">
                  <img src="https://source.unsplash.com/random/800x600/?tech-gadgets" alt="Tech Gadgets" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?smartphone')">
                  <img src="https://source.unsplash.com/random/800x600/?smartphone" alt="Smartphone Products" class="premium-product-image">
                </div>
                <div class="sample-product" style="background-color: #e1e1e1;" onclick="openImageModal('https://source.unsplash.com/random/800x600/?wearable-tech')">
                  <img src="https://source.unsplash.com/random/800x600/?wearable-tech" alt="Wearable Tech Products" class="premium-product-image">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      {% for business in premium_businesses %}
        <div class="premium-card-wrapper">
          <div class="premium-badge">
            <i class="fas fa-crown"></i>
            PREMIUM
          </div>
          
          <div class="premium-card">
            <div class="premium-card-content">
              <div class="premium-card-header">
                <h2 class="premium-card-title">{{ business.name }}</h2>
                <p class="premium-card-description">{{ business.description }}</p>
              </div>
              
              <!-- Business Card with Flip Animation -->
              <div class="business-card-container" id="card-{{ business.id }}">
                <div class="business-card-inner">
                  <div class="business-card-front">
                    {% if business.business_cards.exists and business.business_cards.first.front_image %}
                      <img src="{{ business.business_cards.first.front_image.url }}" 
                           alt="{{ business.name }} Business Card Front" 
                           class="business-card-image">
                    {% else %}
                      <div class="business-card-display">
                        <div class="custom-business-card">
                          <div class="custom-card-header">
                            <i class="fas fa-building"></i> {{ business.name|upper }}
                          </div>
                          <div class="custom-card-content">
                            <div class="custom-card-row">
                              <i class="fas fa-user"></i> <span>{{ business.owner.get_full_name|default:"Business Owner" }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-phone"></i> <span>{{ business.phone }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-envelope"></i> <span>{{ business.email }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-map-marker-alt"></i> <span>{{ business.address.city }}, {{ business.address.state }}</span>
                            </div>
                            <div class="custom-card-row">
                              <i class="fas fa-tag"></i> <span>
                                {% for category in business.categories.all|slice:":2" %}
                                  {{ category.name }}{% if not forloop.last %} • {% endif %}
                                {% empty %}
                                  Professional Services
                                {% endfor %}
                              </span>
                            </div>
                          </div>
                          <div class="custom-card-footer">
                            "Quality service you can trust"
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                  <div class="business-card-back">
                    {% if business.business_cards.exists and business.business_cards.first.back_image %}
                      <img src="{{ business.business_cards.first.back_image.url }}" 
                           alt="{{ business.name }} Business Card Back" 
                           class="business-card-image">
                    {% else %}
                      <div class="business-card-display">
                        <div class="custom-business-card">
                          <div class="custom-card-content" style="padding: 20px; text-align: center;">
                            <h3 style="margin-bottom: 10px;">Our Services</h3>
                            <ul style="text-align: left; font-size: 0.8rem; padding-left: 20px;">
                              {% for category in business.categories.all %}
                                <li>{{ category.name }}</li>
                              {% empty %}
                                <li>Professional Services</li>
                                <li>Quality Products</li>
                                <li>Customer Support</li>
                              {% endfor %}
                            </ul>
                            {% if business.website %}
                              <p style="margin-top: 10px; font-size: 0.8rem;">Visit our website: {{ business.website }}</p>
                            {% endif %}
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  </div>
                </div>
              </div>
              
              <div style="text-align: center;">
                <span class="card-flip-label" onclick="flipCard('{{ business.id }}')">
                  <span class="flip-text">Back Side</span>
                </span>
              </div>
              
              <!-- Discount Light Bulb Below Card -->
              <div class="discount-light-container">
                {% if business.promotions.exists %}
                  <div class="discount-light-bulb active" title="Active Promotion!"></div>
                  <span class="promotion-code">{{ business.promotions.first.code|default:"PROMO2025" }}</span>
                {% else %}
                  <div class="discount-light-bulb" style="opacity: 0.3;" title="No active promotions"></div>
                {% endif %}
              </div>
              
              <div class="premium-card-contact">
                <div><i class="fas fa-map-marker-alt"></i> {{ business.address }}</div>
                <div><i class="fas fa-phone"></i> {{ business.phone }}</div>
                <div><i class="fas fa-envelope"></i> {{ business.email }}</div>
              </div>
              
              {% if business.website %}
                <a href="{{ business.website }}" class="premium-website" target="_blank">
                  <i class="fas fa-external-link-alt"></i> Visit Website
                </a>
              {% endif %}
              
              {% if business.images.all|length > 0 %}
                <div class="premium-product-section">
                  <h3 style="text-align: center; color: #333; margin-bottom: 10px;">
                    <i class="fas fa-images"></i> Product Gallery
                  </h3>
                  <div class="premium-product-images">
                    {% for image in business.images.all|slice:":4" %}
                      <img src="{{ image.image.url }}" 
                           alt="{{ business.name }} - {{ image.caption }}" 
                           class="premium-product-image"
                           onclick="openImageModal('{{ image.image.url }}')">
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      {% empty %}
        {% if not premium_businesses.exists %}
        <div class="no-results" style="grid-column: 1 / -1; text-align: center; padding: 60px 20px;">
          <i class="fas fa-store-slash" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
          <h3>No Premium Businesses Available</h3>
          <p style="color: #666;">Check back later for featured premium businesses in your area.</p>
        </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize card flip on click
    const businessCards = document.querySelectorAll('.business-card-container');
    businessCards.forEach(card => {
      card.addEventListener('click', function() {
        const businessId = this.id.replace('card-', '');
        flipCard(businessId);
      });
    });
  });
  
  function flipCard(businessId) {
    const card = document.getElementById('card-' + businessId);
    const flipLabel = card.nextElementSibling.querySelector('.flip-text');
    
    if (card) {
      card.classList.toggle('flipped');
      // Update label text
      if (card.classList.contains('flipped')) {
        flipLabel.textContent = 'Front Side';
      } else {
        flipLabel.textContent = 'Back Side';
      }
    }
  }
  
  function openImageModal(imageUrl) {
    // Simple image modal (you can enhance this with a proper lightbox library)
    const modal = document.createElement('div');
    modal.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: pointer;
    `;
    
    const img = document.createElement('img');
    img.src = imageUrl;
    img.style.cssText = `
      max-width: 90%;
      max-height: 90%;
      object-fit: contain;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
    `;
    
    modal.appendChild(img);
    document.body.appendChild(modal);
    
    modal.addEventListener('click', function() {
      document.body.removeChild(modal);
    });
  }
</script>
{% endblock %}