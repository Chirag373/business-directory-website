{% load static %}

<!-- Business Card Upload Section -->
<h2><i class="fas fa-id-card"></i> Business Card Upload</h2>

<div class="upload-intro">
  <p class="lead-text">Upload clear, high-quality images of your business card. This helps us verify your business information and builds trust with potential customers.</p>
</div>

<form class="business-card-form" action="{% url 'handyman_update_business_card' %}" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  
  <!-- Upload Containers in a single row -->
  <div class="upload-container-row">
    <!-- Front Side Upload -->
    <div class="upload-section">
      <h3 class="section-title">
        <i class="fas fa-upload"></i> 
        <span>Front Side</span>
        <span class="required-badge">Required</span>
      </h3>
      
      <div class="upload-container" data-upload-type="front">
        <div class="form-group">
          <label for="card-front" class="upload-label">
            <div class="upload-icon">
              <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <div class="upload-text">
              <strong>Click to upload</strong> or drag and drop
            </div>
            <div class="upload-info">
              PNG, JPG, JPEG up to 5MB
            </div>
            <div class="upload-progress" style="display: none;">
              <div class="progress-bar"></div>
            </div>
          </label>
          <input type="file" id="card-front" name="card_front" accept="image/*" class="file-input" required>
        </div>
      </div>
    </div>

    <!-- Back Side Upload -->
    <div class="upload-section">
      <h3 class="section-title">
        <i class="fas fa-upload"></i> 
        <span>Back Side</span>
        <span class="optional-badge">Optional</span>
      </h3>
      
      <div class="upload-container" data-upload-type="back">
        <div class="form-group">
          <label for="card-back" class="upload-label">
            <div class="upload-icon">
              <i class="fas fa-cloud-upload-alt"></i>
            </div>
            <div class="upload-text">
              <strong>Click to upload</strong> or drag and drop
            </div>
            <div class="upload-info">
              PNG, JPG, JPEG up to 5MB
            </div>
            <div class="upload-progress" style="display: none;">
              <div class="progress-bar"></div>
            </div>
          </label>
          <input type="file" id="card-back" name="card_back" accept="image/*" class="file-input">
        </div>
      </div>

      <!-- Blank Back Checkbox -->
      <div class="blank-back-container">
        <label class="checkbox-container">
          <input type="checkbox" id="blank-back" name="blank_back" {% if user.has_blank_card_back %}checked{% endif %}>
          <span class="checkbox-custom"></span>
          <span class="checkbox-label">
            <strong>My business card backside is blank</strong>
            <small>Check this if your card has no content on the back</small>
          </span>
        </label>
      </div>
    </div>
  </div>

  <!-- Flip Card Preview -->
  <div class="card-preview-container">
    <h3 class="section-title">
      <i class="fas fa-eye"></i> 
      <span>Business Card Preview</span>
    </h3>
    
    <div class="flip-card-container">
      <div class="flip-card" id="flip-card">
        <div class="flip-card-inner">
          <!-- Front Side -->
          <div class="flip-card-front">
            <div id="front-preview" class="card-preview-panel">
              {% if user.business_card_front %}
                <img src="{{ user.business_card_front.url }}" alt="Business card front" class="preview-image">
                <div class="preview-overlay">
                  <i class="fas fa-expand-alt"></i>
                </div>
              {% else %}
                <div class="preview-placeholder">
                  <i class="fas fa-image"></i>
                  <span class="preview-text">Front side preview will appear here</span>
                </div>
              {% endif %}
            </div>
          </div>
          
          <!-- Back Side -->
          <div class="flip-card-back">
            <div id="back-preview" class="card-preview-panel">
              {% if user.business_card_back %}
                <img src="{{ user.business_card_back.url }}" alt="Business card back" class="preview-image">
                <div class="preview-overlay">
                  <i class="fas fa-expand-alt"></i>
                </div>
              {% elif user.has_blank_card_back %}
                <div class="blank-back-indicator">
                  <i class="fas fa-square"></i>
                  <span>Blank back side</span>
                </div>
              {% else %}
                <div class="preview-placeholder">
                  <i class="fas fa-image"></i>
                  <span class="preview-text">Back side preview will appear here</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      
      <!-- Flip Controls -->
      <div class="flip-controls">
        <button type="button" class="flip-button active" id="show-front">
          <i class="fas fa-id-card"></i> Front Side
        </button>
        <button type="button" class="flip-button" id="show-back">
          <i class="fas fa-id-card-alt"></i> Back Side
        </button>
      </div>
    </div>
  </div>

  <!-- Upload Requirements -->
  <div class="upload-requirements">
    <h4><i class="fas fa-info-circle"></i> Upload Requirements</h4>
    <div class="requirements-grid">
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>Clear & Legible</strong>
          <span>Images must be sharp and readable</span>
        </div>
      </div>
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>Business Info Visible</strong>
          <span>All text should be clearly visible</span>
        </div>
      </div>
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>File Size Limit</strong>
          <span>Maximum 5MB per image</span>
        </div>
      </div>
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>Supported Formats</strong>
          <span>PNG, JPG, JPEG only</span>
        </div>
      </div>
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>Minimum Resolution</strong>
          <span>800x600 pixels or higher</span>
        </div>
      </div>
      <div class="requirement-item">
        <i class="fas fa-check-circle"></i>
        <div>
          <strong>Good Lighting</strong>
          <span>Avoid shadows and glare</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Verification Status -->
  {% if user.business_card_front %}
  <div class="verification-status">
    <div class="status-item">
      <div class="status-icon verified">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="status-content">
        <h4>Business Card Uploaded Successfully</h4>
        <p>Your business card has been uploaded and is pending verification. Our team will review it within 24-48 hours.</p>
        <div class="status-badges">
          <span class="status-badge pending">
            <i class="fas fa-clock"></i> Pending Review
          </span>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="form-actions">
    <button type="submit" class="primary-button">
      <i class="fas fa-upload"></i> 
      <span>Update Business Card</span>
      <div class="button-ripple"></div>
    </button>
  </div>
</form>

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/business_card.css' %}">
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/business_card.js' %}"></script>
{% endblock %}